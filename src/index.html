<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Jalo App</title>
</head>
<body>
      <h1>Registro</h1>
      <input type="email" id="email" placeholder="e-mail"/>
      <input type="password" id="password" placeholder="password"/>
      <button onclick="enviar()">Enviar</button>

      <h1>Login</h1>
      <input type="email" id="emailLog" placeholder="e-mail"/>
      <input type="password" id="passwordLog" placeholder="password"/>
      <button onclick="acceso()">Entrar</button>

      <h1 id="login"></h1>
  
  <script type="module" src="main.js"></script>
  <div id="root"></div>    
<!-- TODO ESTO ES LA INSTALACION DE FIREBASE-->

        <!-- The core Firebase JS SDK is always required and must be listed first -->
        <script src="https://www.gstatic.com/firebasejs/8.2.7/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.2.7/firebase-auth.js"></script>

        <!-- TODO: Add SDKs for Firebase products that you want to use
            https://firebase.google.com/docs/web/setup#available-libraries -->
        <script src="https://www.gstatic.com/firebasejs/8.2.7/firebase-analytics.js"></script>

        <script>
          // Your web app's Firebase configuration
          // For Firebase JS SDK v7.20.0 and later, measurementId is optional
          var firebaseConfig = {
            apiKey: "AIzaSyAphkTjnCyuMEe9J2BlkLSnRf11LDrRKq8",
            authDomain: "jaloredsocial.firebaseapp.com",
            projectId: "jaloredsocial",
            storageBucket: "jaloredsocial.appspot.com",
            messagingSenderId: "438968128013",
            appId: "1:438968128013:web:9d1b47242a6f58c825bb44",
            measurementId: "G-8FRZGM62BF"
          };
          // Initialize Firebase
          firebase.initializeApp(firebaseConfig);
          firebase.analytics();

          firebase.auth().onAuthStateChanged((user) => {
            if (user) {
              // User is signed in, see docs for a list of available properties
              // https://firebase.google.com/docs/reference/js/firebase.User
              var uid = user.uid;
              // ...
              document.getElementById("login").innerHTML="Logeado "+user.email;
              console.log(user);
            } else {
              // User is signed out
              // ...
              document.getElementById("login").innerHTML="No logeado "+user.email;
            }
          });


          function enviar (){
            var email = document.getElementById('email').value;
            var password = document.getElementById('password').value;
            //alert("email="+email+" password="+password);

            firebase.auth().createUserWithEmailAndPassword(email, password)
              .then((user) => {
                // Signed in
                // ...
              })
              .catch((error) => {
                var errorCode = error.code;
                var errorMessage = error.message;
                // ..
                alert(errorMessage);
              });
          }

          function acceso (){
            var emailLog = document.getElementById('emailLog').value;
            var passwordLog = document.getElementById('passwordLog').value;
            //alert("email="+email+" password="+password);
            firebase.auth().signInWithEmailAndPassword(emailLog, passwordLog)
              .then((user) => {
                // Signed in
                // ...
              })
              .catch((error) => {
                var errorCode = error.code;
                var errorMessage = error.message;
                alert(errorMessage);
              });
          }

</script>


<script src="main.js" type="module"></script>
</body>
</html>